<!DOCTYPE html>
<!--
Template Name: Orizon
Author: <a href="http://www.os-templates.com/">OS Templates</a>
Author URI: http://www.os-templates.com/
Licence: Free to use under our free template licence terms
Licence URI: http://www.os-templates.com/template-terms
-->
<html>
<head>
<title>John Turner | Simulation | Constrained Particle Sim (Baraff and Witkin)</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
#simP3Tbl{
        width:100%;
        border-bottom:none;
        border-left:solid 1px;
}
#simP3Tbl img{
        width:100%; height:auto;
}
</style>
<link href="../../cvlayout/styles/layout.css" rel="stylesheet" type="text/css" media="all">
</head>
<body id="top">
<div class="wrapper row0">
  <header id="header" class="clear"> 
    <div id="logo" class="fl_left">
      <h1><a href="../../index.html">John Turner | Constrained Particle Sim</a></h1>
    </div>
    <div class="fl_right">
      <ul class="nospace inline">
        <li><a href="../../index.html">Home</a></li>
        <li><a href="../about.html">About</a></li>
        <li><a href="../CV.html">CV</a></li>
        <li><a href="../music.html">Music</a></li>
      </ul>
    </div>
  </header>
</div>
<div class="wrapper row1">
  <div id="topbar" class="clear"> 
    <nav id="mainav" class="fl_left">
      <ul class="clear">       
        <li><a class="drop" href="../charanim/portfolioCharAnim.html">Character Control</a>
          <ul>
            <li><a href="../charanim/charanimProj6.html">Online Control Using Particle Belief Propagation</a></li>
            <li><a href="../charanim/charanimProj5.html">Benchmark and Optimize Biped Controllers Using Biomech Data and CMA</a></li>
            <li><a href="../charanim/charanimProj4.html">SIMBICON Implementation</a></li>
            <li><a href="../charanim/charanimProj3.html">Maintain Biped Balance Through Inverted Pendulum Model</a></li>
            <li><a href="../charanim/charanimProj2.html">Kinect Library</a></li>
            <li><a href="../charanim/charanimProj1.html">IK Solver</a></li>
          </ul>
        </li>
        <li class="active"><a class="drop" href="../sim/portfolioSim.html">Animation/Sim</a>
          <ul>
            <li><a href="../sim/simProj9.html">Snow Globe 2 (3D Fluid and Particle Snow in a Globe)</a></li>
            <li><a href="../sim/simProj8.html">3D Mass-Spring Locomotion</a></li>
            <li><a href="../sim/simProj7.html">2D/3D Diffusion Limited Aggregation</a></li>
            <li><a href="../sim/simProj6.html">GLSL/Marching Cubes Reaction Diffusion</a></li>
            <li><a href="../sim/simProj5.html">3D Rigid Body Flocking and Roshambo Predator-Prey System</a></li>
            <li><a href="../sim/simProj4.html">Eroding Fractal & Procedural Terrains Using Heightfield Fluids</a></li>
            <li class="active"><a href="../sim/simProj3.html">Constrained Particle Sim (Baraff and Witkin)</a></li>
            <li><a href="../sim/simProj2.html">Stam GDC Fluid Simulation</a></li>
            <li><a href="../sim/simProj1.html">Game Of Life</a></li>   
          </ul>
        </li>         
        <li><a class="drop" href="../graph/portfolioGrph.html">Graphics</a>
          <ul>
            <li><a href="../graph/graphProj8.html">Torroidal Sweep of Drawn Shape</a></li>
            <li><a href="../graph/graphProj7.html">Extrude Polygon and Generate 3D Corner Table</a></li>
            <li><a href="../graph/graphProj6.html">Generate Polygon and Parse in 4 equal areas</a></li>
            <li><a href="../graph/graphProj5.html">Keyframe Interpolation Through Drawn Targets</a></li>
            <li><a href="../graph/graphProj4.html">Interpolating Keyframe Animation (MEL scripts in Maya)</a></li>
            <li><a href="../graph/graphProj3.html">Subdivision Surfaces</a></li>
            <li><a href="../graph/graphProj2.html">Raytracer</a></li>
            <li><a href="../graph/graphProj1.html">Animated Snowmen (Snow Globe 1)</a></li>
          </ul>
        </li>
        <li><a class="drop" href="../comvis/portfolioComVis.html">Computer Vision</a>
          <ul>
            <li><a href="../comvis/comvisProj7.html">Face-Audio-Caption dataset, SOM of data, and LSTM-based lipreader</a></li>
            <li><a href="../comvis/comvisProj6.html">Convolution NN for Object Recognition</a></li>
            <li><a href="../comvis/comvisProj5.html">Face Detection with a Sliding Window</a></li>
            <li><a href="../comvis/comvisProj4.html">Scene Recognition with Bag of Words and Linear and Nonlinear SVM</a></li>
            <li><a href="../comvis/comvisProj3.html">Camera Calibration and Fundamental Matrix Estimation with RANSAC</a></li>
            <li><a href="../comvis/comvisProj2.html">Local Feature Matching with Harris Corners and SIFT Features</a></li>
            <li><a href="../comvis/comvisProj1.html">Hybrid Images</a></li>         </ul>
        </li>
        <li><a class="drop" href="../games/portfolioGames.html">Games And Music</a>
          <ul>
            <li><a href="../games/gameProj4.html">Sequencer and JCuda Music Visualizer</a></li>
             <li><a href="../games/gameProj3.html">Demo Man - Destroy Procedurally Generated Rigid Body-based Buildings</a></li>
            <li><a href="../games/gameProj2.html">MechArchon Game</a></li>
            <li><a href="../games/gameProj1.html">Demo Proposal of MechArchon Game</a></li>
          </ul>
        </li>
        <li><a class="drop" href="../ml/portfolioML.html">AI/ML</a>
          <ul>
            <li><a href="../ml/mlProj7.html">Gaussian Process Regression</a></li>
            <li><a href="../ml/mlProj6.html">Kalman Filter and EKF based Simulated Helicopter Control</a></li>
            <li><a href="../ml/mlProj5.html">Particle Filter-Based Robot Localization</a></li>
            <li><a href="../ml/mlProj4.html">Randomized Optimization</a></li>
            <li><a href="../ml/mlProj3.html">Reinforcement Learning and MDP's</a></li>            
            <li><a href="../ml/mlProj2.html">Classification, Regression and Dimensionality Reduction</a></li>
            <li><a href="../ml/mlProj1.html">Pacman AI Projects</a></li>
          </ul>
        </li>
        <li><a class="drop" href="../nads/portfolioNADS.html">Data Science</a>
          <ul>
            <li><a href="../nads/nadsProj6.html">Modeling Look-alikes via Self-organizing Maps</a></li>
            <li><a href="../nads/nadsProj5.html">Behavior Prediction via Single Hidden Layer Neural Net</a></li>
            <li><a href="../nads/nadsProj4.html">Moments-Based Revenue/Cost Analysis of Online Conversions</a></li>
            <li><a href="../nads/nadsProj3.html">Media Mix Modeling Using Nonlinear Regression</a></li>
            <li><a href="../nads/nadsProj2.html">Quasi-Newton Method Solvers</a></li>
            <li><a href="../nads/nadsProj1.html">Newtonian Method Based Solvers</a></li>          </ul>
        </li>
      </ul>
    </nav>
  </div>
</div>
<div class="wrapper row2 bgded" style="background-image:url('../../cvimages/sim/backgrounds/02.png');">
  <div class="overlay">
    <div id="breadcrumb" class="clear"> 
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="portfolioSim.html">Simulation Portfolio</a></li>
        <li><a href="#">Constrained Particle Sim (Baraff and Witkin)</a></li>
      </ul>
    </div>
  </div>
</div>
<div class="wrapper row3">
  <main class="container clear"> 
    <!-- main body -->
    <div class="content"> 
      <h1>Constrained Particle Sim (Baraff and Witkin)</h1>
      <div class="scrollable">
        <table>
          <thead>
            <tr>
              <th>Class</th>
              <th>Instructor</th>
              <th>Date</th>
              <th>Language</th>
              <th>Ta'ed</th>
              <th>Code</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>CS 4496 Computer Animation</td>
              <td>Karen Liu</td>
              <td>Spring 2013</td>
              <td>C++</td>
              <td>No</td>
              <td><a href="https://github.com/jturner65/ParticleSim">Github Repo</a></td>
            </tr>
            <tr>
              <td>CS 4496 Computer Animation</td>
              <td>Karen Liu</td>
              <td>Spring 2015</td>
              <td>C++</td>
              <td>Yes</td>
              <td>Code N/A</td>
            </tr>
            <tr>
              <td>CS 4496 Computer Animation</td>
              <td>Karen Liu</td>
              <td>Spring 2016</td>
              <td>C++</td>
              <td>Yes</td>
              <td>Code N/A</td>
            </tr>
            <tr>
              <td>CS 7496 Graduate Computer Animation</td>
              <td>Karen Liu</td>
              <td>Fall 2016</td>
              <td>C++</td>
              <td>Yes</td>
              <td>Code N/A</td>
            </tr>
          </tbody>
        </table>
      </div>      
      <p>This project implemented a particle simulator using many of the mechanisms and architecture suggested in the Baraff and Witkin SIGGRAPH class from the late 90's.  I implemented
      numerous integrators - Forward Euler, Implicit Euler, Semi-Implicit Euler, RK3, RK4, Verlet - all accessible for each individual particle via function pointers so I could compare their performance on a particle-by-particle basis.  
      I implemented numerous forces - gravity, particle-particle attraction/repulsion, damped spring forces - and collisions - particle-particle, particle-sphere collider, particle-planar collider, with and without friction.
      I also implemented both positional (to make a simple cloth that responded to collisions) and force constraints, as well as a Conjugate Gradient solver to build a mass-spring system with 
      many particles solved with an implicit integrator.  I also added a 3D euler-grid based fluid solver to provide environmental effects for certain simulations, like the "seaweed" sim below.</p>
      <p>The simulator itself consists of numerous simulation windows, each with a different base configuration.  An essential component of this simulator, for me, was to be able to actively configure the environment, like adding new particles and constraints on the fly. Both particle-to-particle 
      constraints and fixed circular constraints can be drawn by the user while the simulation is in progress.  The user can also click-drag on the screen to add a force to the particles, or to the 
      environmental fluid, if the particular sim window has such a fluid.  This is also demonstrated below.</p> 
    
     <p>Below are some videos of the particle sim in action (with links if the videos don't play automatically) : </p>
     <table id="simP3Tbl" >
      	<tr><td><a href="../../cvexclips/sim/proj3/simProj3a.mp4">Comparison of Integrators in Freefall Sim.</a> <p>These sets of falling particles are intended to illustrate the error inherent in the various approximation-based integrators that I implemented.  
      		The first particle on the left is solving the solution analytically (freefall with V0 = 0 and constant gravitational acceleration) and therefore serves as a ground truth.  
      		The integrators used for each of the subsequent particles are : Explicit(Forward) Euler, Midpoint Method, RK3, RK4, Implicity Euler, Trapezoidal Rule, Verlet, Generalized RK4.</p> 
      		<p>A few interesting observations :</p><ol><li>At the end of the clip I add a force to all the particles (except the ground truth), by dragging from left to right across the screen. </li> 
      		<li>The RK3, RK4 and Generalized RK4 are all effectively the same in this simulation, since their errors are all of a higher order (in power of timestep) than the function describing the motion. </li>     		
      		<li>Since the Verlet integrator I implemented doesn't consider the velocity at each time step, and since I handle collisions with planar colliders by reflecting the velocity vector of the particle across the normal of the collider 
      		(scaled by some constant (0,1] representing collider elasticity), the collision is not handled correctly and the particle falls through the ground.</li></ol> </p></td></tr>
      	<tr><td><video width="800" height="450" autoplay loop><source src="../../cvexclips/sim/proj3/simProj3a.mp4" type="video/mp4">Your browser does not support the video tag.</video></td></tr>
      	<tr><td><a href="../../cvexclips/sim/proj3/simProj3b.mp4">Comparison of Integrators in a constrained system.</a>  <p>A compensating force is derived to keep the particles following the circular constraint path. The ground truth implementation only solves for gravitational force and so does not follow the circular constraint, but 
      		otherwise the integrators are the same as those listed above, from top to bottom, Left Column : Ground Truth, Explicit(Forward) Euler, Midpoint Method; Middle Column : RK3, RK4, Implicity Euler; Right Column : Trapezoidal Rule, Verlet, Generalized RK4.</p>
      		<p>Note the compounding error in the forward methods (Forward Euler, Midpoint Method) causing them to explode.</p></td></tr>
      	<tr><td><video width="800" height="450" autoplay loop><source src="../../cvexclips/sim/proj3/simProj3b.mp4" type="video/mp4">Your browser does not support the video tag.</video></td></tr>
     	<tr><td><a href="../../cvexclips/sim/proj3/simProj3c.mp4">Circular Constrained Particle.</a> <p>Note the particles being added, as well as both a fixed-center 
     		constraint and a particle-to-particle constraint, via user input. This sim uses an RK4 integrator on all particles. </p></td></tr>
      	<tr><td><video width="800" height="450" autoplay loop><source src="../../cvexclips/sim/proj3/simProj3c.mp4" type="video/mp4">Your browser does not support the video tag.</video></td></tr>
     	<tr><td><a href="../../cvexclips/sim/proj3/simProj3d.mp4">Newton's Cradle.</a> <p>Again particles and constraints are added when the sim is paused (the jump in the middle of the clip is 
     		due splicing two screen caps with a few seconds dropped in the middle).</p> </td></tr>
      	<tr><td><video width="800" height="450" autoplay loop><source src="../../cvexclips/sim/proj3/simProj3d.mp4" type="video/mp4">Your browser does not support the video tag.</video></td></tr>
   		<tr><td><a href="../../cvexclips/sim/proj3/simProj3e.mp4">"Roller Coaster"</a><p>With this simulation, I have the various particles possibly jump constraints where the constraint paths touch, based on the 
   			direction of the applied force on the particle when it reaches the contact point.  As the clip runs I apply various forces to the system via mouse-drags, and particles can be seen to jump between various constraints
   			accordingly. </p> </td></tr>
      	<tr><td><video width="800" height="450" autoplay loop><source src="../../cvexclips/sim/proj3/simProj3e.mp4" type="video/mp4">Your browser does not support the video tag.</video></td></tr>
   		<tr><td><a href="../../cvexclips/sim/proj3/simProj3f.mp4">"Seaweed" Sim</a><p>In this sim, each vertical construct consists of particles and constraints between them to maintain their distance.  
   		Furthermore, "torques" are applied at each particle to attempt to keep the next particle directly above it (this started as an inverted pendulum experiment).  Lastly, I put a 3D Euler-grid fluid in this sim, and instead of the 
   		click-drag input modifying the force on the particles directly, it modifies the force in the fluid, which in turn applies forces to each particle.  </p> </td></tr>
      	<tr><td><video width="800" height="450" autoplay loop><source src="../../cvexclips/sim/proj3/simProj3f.mp4" type="video/mp4">Your browser does not support the video tag.</video></td></tr>
	</table>

    </div>
    <!-- / main body -->
    <div class="clear"></div>
  </main>
</div>
<div class="wrapper row6">
  <div id="copyright" class="clear"> 
    <p class="fl_left">Copyright &copy; 2015 - All Rights Reserved - <a href="#">johnmturner.com</a></p>
    <p class="fl_right">Template by <a target="_blank" href="http://www.os-templates.com/" title="Free Website Templates">OS Templates</a></p>
  </div>
</div>
<a id="backtotop" href="#top"><i class="fa fa-chevron-up"></i></a> 
<!-- JAVASCRIPTS -->
<script src="../../cvlayout/scripts/jquery.min.js"></script>
<script src="../../cvlayout/scripts/jquery.backtotop.js"></script>
<script src="../../cvlayout/scripts/jquery.mobilemenu.js"></script>
</body>
</html>